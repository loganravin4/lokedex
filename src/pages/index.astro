---
import BaseLayout from '../layouts/BaseLayout.astro';
import PokedexCard from '../components/pokemon/PokedexCard';
import TypeBadge from '../components/pokemon/TypeBadge';
import { fetchFeaturedProjects } from '../lib/fetchProjects';

// Fetch featured projects from Sanity
const projects = await fetchFeaturedProjects();

// Transform Sanity data to match component props
const transformedProjects = projects.map((project) => ({
  id: project._id,
  name: project.name,
  description: project.description,
  shortDescription: project.shortDescription,
  types: project.types,
  techs: project.techs,
  link: project.link,
  github: project.github,
}));

const techStack = [
  { type: 'electric', tech: 'TypeScript' },
  { type: 'water', tech: 'React' },
  { type: 'fire', tech: 'Node.js' },
  { type: 'grass', tech: 'Python' },
  { type: 'psychic', tech: 'PostgreSQL' },
  { type: 'dragon', tech: 'PyTorch' },
];
---

<BaseLayout title="Logan's Portfolio - Gotta Code 'Em All!">
  <main class="container mx-auto px-4 py-8 max-w-7xl">
    <!-- Hero Section -->
    <section class="min-h-screen flex items-center justify-center mb-20">
      <div class="text-center">
        <h1 class="font-pokemon text-4xl md:text-6xl text-poke-yellow mb-6 animate-pulse-slow">
          LOGAN'S
          <br />
          <span class="text-poke-red">PORTFOLIO</span>
        </h1>
        <p class="text-xl md:text-2xl text-white/90 mb-8 font-mono">
          Full-Stack Developer | Northeastern University
        </p>
        <div class="flex justify-center gap-4 mb-12">
          <a
            href="#projects"
            class="bg-poke-red hover:bg-poke-red/80 transition-colors px-8 py-4 rounded-lg font-bold text-white text-lg border-4 border-white/20"
          >
            View Projects
          </a>
          
          <a
            href="#about"
            class="bg-poke-blue hover:bg-poke-blue/80 transition-colors px-8 py-4 rounded-lg font-bold text-white text-lg border-4 border-white/20"
          >
            About Me
          </a>
        </div>
        <p class="font-pokemon text-sm text-white/60">
          Gotta Code 'Em All!
        </p>
      </div>
    </section>

    <!-- Tech Stack Section -->
    <section id="about" class="mb-20">
      <h2 class="font-pokemon text-3xl text-poke-yellow mb-8 text-center">
        TYPE EFFECTIVENESS
      </h2>
      <div class="flex flex-wrap justify-center gap-4">
        {techStack.map((item) => (
          <TypeBadge type={item.type} tech={item.tech} client:load />
        ))}
      </div>
    </section>

    <!-- Projects Section (Pokédex) -->
    <section id="projects" class="mb-20">
      <div class="text-center mb-12">
        <h2 class="font-pokemon text-3xl text-poke-yellow mb-4">
          PROJECT POKÉDEX
        </h2>
        <p class="text-white/80">
          The Elite Four of my portfolio
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto">
        {transformedProjects.map((project, index) => (
          <PokedexCard project={project} index={index} client:load />
        ))}
      </div>
    </section>

    <!-- About Section -->
    <section class="mb-20 bg-gradient-to-r from-poke-blue/20 to-poke-psychic/20 rounded-2xl p-8 border-4 border-poke-yellow/30">
      <h2 class="font-pokemon text-3xl text-poke-yellow mb-6">
        ABOUT THE TRAINER
      </h2>
      <div class="space-y-4 text-white/90">
        <p>
          Hey! I'm Logan, an Honors Computer Engineering and Computer Science student at Northeastern University. 
          I'm currently working as a Software Engineer at NExT Consulting, 
          building full-stack data-driven and ML-powered software solutions for external clients.
        </p>
        <p>
          On campus, I serve as a Technical Lead at the Student Government Association and 
          work as a Machine Learning Engineer at Artificial Intelligence Northeastern.
        </p>
        <p>
          When I'm not coding, you'll find me weightlifting, gaming on Mario Kart, or vibing to my 76,533 minutes of Spotify.
        </p>
      </div>
      
      <div class="flex gap-4 mt-8">
        <a
          href="https://github.com/loganravin4"
          target="_blank"
          rel="noopener noreferrer"
          class="bg-poke-black hover:bg-poke-black/80 transition-colors px-6 py-3 rounded-lg font-bold text-white"
        >
          GitHub
        </a>
        
        <a
          href="https://www.linkedin.com/in/logan-ravinuthala/"
          target="_blank"
          rel="noopener noreferrer"
          class="bg-poke-blue hover:bg-poke-blue/80 transition-colors px-6 py-3 rounded-lg font-bold text-white"
        >
          LinkedIn
        </a>
      </div>
    </section>
  </main>
</BaseLayout>

<style>
  .perspective-1000 {
    perspective: 1000px;
  }
</style>